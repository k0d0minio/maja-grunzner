#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ðŸ” Running pre-push checks..."

# Type check if TypeScript exists
if [ -f "tsconfig.json" ]; then
  npm run type-check || {
    echo "âŒ TypeScript errors found"
    echo "$(date): Push blocked - TypeScript errors" >> .cursor/learned/errors.log
    echo "ðŸ’¡ Tip: Use '/fix-failed-build' in Cursor"
    exit 1
  }
fi

# Build check
npm run build || {
  echo "âŒ Build failed"
  echo "$(date): Push blocked - Build failed" >> .cursor/learned/errors.log
  echo "ðŸ’¡ Tip: Use '/fix-failed-build' in Cursor"
  exit 1
}

echo "âœ… All checks passed!"

